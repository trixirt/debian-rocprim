#!/usr/bin/make -f
export CXX=hipcc
export DEB_BUILD_MAINT_OPTIONS = hardening=-all
export VERBOSE=1
#export AMD_LOG_LEVEL=4

%:
	dh $@ -Scmake

override_dh_auto_configure:
	dh_auto_configure -- \
		-DCMAKE_BUILD_TYPE=Release \
		-DENABLE_INLINE_ASM=1
#-DBUILD_TEST=ON \

# Exclude HSA and other code objects for now.
override_dh_strip:
	dh_strip --exclude=.hsaco --exclude=.co

#/!\ TODO un-override this! There are google tests in there, not sure if dfsg needed.
override_dh_auto_test:
	echo "No test, overridden for now"
